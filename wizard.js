!function(){"use strict";function e(){var e,t=document.getElementById("url"),n=Array.from(document.getElementsByClassName("values")).map((function(e){return e.id+"="+encodeURIComponent(e.value)}));e=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?"+n.join("&"),t.value=e}function t(){var e=document.getElementById("remaining"),t=document.getElementById("measurement-remainder"),n=Array.from(document.getElementsByClassName("values"));let a=new Map;n.forEach(e=>{0!=e.value&&0!=e.value.length||(e.value=0),a.set(e.id,e.value)});let r=new Map;a.forEach((e,t)=>{var n=function(e){if(-1!=e.indexOf("/")){var t,n=e.split(" ");return n.length>1?t=n[1].split("/"):(t=n[0].split("/"),n[0]=0),parseInt(n[0],10)+parseInt(t[0],10)/parseInt(t[1],10)}return parseInt(e,10)}(e);r.set(t,n);var a="measurement-"+t;document.getElementById(a).textContent=e+'"'});var o,i=2*r.get("rabbet")-Array.from(r.values()).reduce((function(e,t){return e+t}),0);i<0?(o=s(Math.abs(i)),e.value="-"+o+'"',t.textContent="-"+o+'"',e.classList.add("negative"),t.setAttribute("class","negative")):(o=s(i),e.value=o+'"',t.textContent=o+'"',e.classList.remove("negative"),t.setAttribute("class","positive"));var l=new Map;function s(e){if(parseFloat(e)===parseInt(e))return e;var t=function(e,n){return n<1e-7?e:t(n,Math.floor(e%n))},n=e.toString().length-2,a=Math.pow(10,n),r=e*a,o=t(r,a),i=0;return(r/=o)>(a/=o)&&(r-=(i=Math.floor(r/a))*a),e=Math.floor(r)+"/"+Math.floor(a),i&&(e=i+" "+e),e}r.forEach((e,t)=>{l.set(t,64*e)}),l.forEach((e,t)=>{var n="svg-"+t,a="not-"+t,r=t+"-group",o="measurement-"+t,i=document.getElementById(n),l=document.getElementById(a),s=document.getElementById(r),d=document.getElementById(o),u=e-parseFloat(i.dataset.height),c=e/2+parseFloat(i.getAttribute("y"))+1;if(i.setAttribute("height",e),"rabbet"!=t&&(l.setAttribute("transform","translate(0 "+u+")"),d.setAttribute("y",c),s.style.display=0==e?"none":"inline"),"strainer"==t){var m=parseFloat(document.getElementById("svg-x").getAttribute("y1"))+e;document.getElementById("svg-x").setAttribute("y2",m)}})}window.addEventListener("load",(function(){Array.from(document.getElementsByTagName("rect")).forEach(e=>{var t=e.getAttribute("height");e.setAttribute("data-height",t)}),function(){window.location.href.includes("?rabbet")&&new URL(window.location.href).searchParams.forEach((e,t)=>document.getElementById(t).value=decodeURIComponent(e));t()}(),t(),n=document.getElementById("download"),a=document.querySelector("svg"),n.addEventListener("click",(function(){var e=document.getElementById("downloadable"),t=e.getContext("2d"),n=(new XMLSerializer).serializeToString(a),r=window.URL||window.webkitURL||window,o=new Image,i=new Blob([n],{type:"image/svg+xml;charset=utf-8"}),l=r.createObjectURL(i);o.onload=function(){t.clearRect(0,0,1800,2e3),t.drawImage(o,0,0,1800,2e3),r.revokeObjectURL(l),function(e){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download","frame-diagram.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.dispatchEvent(t)}(e.toDataURL("image/png").replace("image/png","image/octet-stream"))},o.src=l}),!1),e();var n,a}),!1),window.addEventListener("change",t,!1),window.addEventListener("change",e,!1)}();
//# sourceMappingURL=wizard.js.map
