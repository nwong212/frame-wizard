function eventWindowLoaded(){Array.from(document.getElementsByTagName("rect")).forEach(e=>{var t=e.getAttribute("height");e.setAttribute("data-height",t)}),setFromHref(),calculator(),downloadSVG(),makeURL(),chooseProfile()}function setFromHref(){window.location.href.includes("?rabbet")&&new URL(window.location.href).searchParams.forEach((e,t)=>document.getElementById(t).value=decodeURIComponent(e)),calculator()}function makeURL(){var e,t=document.getElementById("url"),n=Array.from(document.getElementsByClassName("values")).map((function(e){return e.id+"="+encodeURIComponent(e.value)}));e=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?"+n.join("&"),t.value=e}function chooseProfile(){var e,t=document.getElementById("chooseProfile"),n=document.getElementById("overlay"),a=document.getElementById("x-button"),o=document.getElementById("frame-pick"),r=document.getElementById("rabbet"),i=document.getElementsByName("profile");t.addEventListener("click",(function(){n.classList.remove("hide"),setTimeout((function(){n.classList.add("show")}),50)})),a.addEventListener("click",(function(){n.classList.remove("show"),setTimeout((function(){n.classList.add("hide")}),300)})),o.addEventListener("change",(function(){for(var n=0,a=i.length;n<a;n++)if(i[n].checked){r.value=i[n].value,e=i[n].nextElementSibling.innerHTML,t.innerHTML=e,t.classList.add("profile-selected");break}}))}function calculator(){var e=document.getElementById("remaining"),t=document.getElementById("measurement-remainder"),n=Array.from(document.getElementsByClassName("values"));let a=new Map;n.forEach(e=>{0!=e.value&&0!=e.value.length||(e.value=0),a.set(e.id,e.value)});let o=new Map;a.forEach((e,t)=>{var n=function(e){if(-1!=e.indexOf("/")){var t,n=e.split(" ");return n.length>1?t=n[1].split("/"):(t=n[0].split("/"),n[0]=0),parseInt(n[0],10)+parseInt(t[0],10)/parseInt(t[1],10)}return parseInt(e,10)}(e);o.set(t,n);var a="measurement-"+t;document.getElementById(a).textContent=e+'"'});var r,i=o.get("rabbet"),l=2*i-Array.from(o.values()).reduce((function(e,t){return e+t}),0);i>=2.375?(document.getElementById("frame-diagram").setAttribute("viewBox","-10 10 180 250"),document.getElementById("downloadable").setAttribute("height","2500")):(document.getElementById("frame-diagram").setAttribute("viewBox","-10 10 180 200"),document.getElementById("downloadable").setAttribute("height","2000")),l<0?(r=c(Math.abs(l)),e.value="-"+r+'"',t.textContent="-"+r+'"',e.classList.add("negative"),t.setAttribute("class","negative")):(r=c(l),e.value=r+'"',t.textContent=r+'"',e.classList.remove("negative"),t.setAttribute("class","positive"));var d=new Map;function c(e){if(parseFloat(e)===parseInt(e))return e;var t=function(e,n){return n<1e-7?e:t(n,Math.floor(e%n))},n=e.toString().length-2,a=Math.pow(10,n),o=e*a,r=t(o,a),i=0;return(o/=r)>(a/=r)&&(o-=(i=Math.floor(o/a))*a),e=Math.floor(o)+"/"+Math.floor(a),i&&(e=i+" "+e),e}o.forEach((e,t)=>{d.set(t,64*e)}),d.forEach((e,t)=>{var n="svg-"+t,a="not-"+t,o=t+"-group",r="measurement-"+t,i=document.getElementById(n),l=document.getElementById(a),d=document.getElementById(o),c=document.getElementById(r),s=e-parseFloat(i.dataset.height),m=e/2+parseFloat(i.getAttribute("y"))+1;if(i.setAttribute("height",e),"rabbet"!=t&&(l.setAttribute("transform","translate(0 "+s+")"),c.setAttribute("y",m),d.style.display=0==e?"none":"inline"),"strainer"==t){var u=parseFloat(document.getElementById("svg-x").getAttribute("y1"))+e;document.getElementById("svg-x").setAttribute("y2",u)}})}function downloadSVG(){var e=document.getElementById("download"),t=document.querySelector("svg");e.addEventListener("click",(function(){var e=document.getElementById("downloadable"),n=e.getContext("2d"),a=(new XMLSerializer).serializeToString(t),o=window.URL||window.webkitURL||window,r=new Image,i=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),l=o.createObjectURL(i),d=e.height;r.onload=function(){n.clearRect(0,0,1800,d),n.rect(0,0,1800,d),n.fillStyle="white",n.fill(),n.drawImage(r,0,0,1800,d),o.revokeObjectURL(l),function(e){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download","frame-diagram.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.dispatchEvent(t)}(e.toDataURL("image/png").replace("image/png","image/octet-stream"))},r.src=l}),!1)}window.addEventListener("load",eventWindowLoaded,!1),window.addEventListener("change",calculator,!1),window.addEventListener("change",makeURL,!1);
//# sourceMappingURL=wizard.js.map