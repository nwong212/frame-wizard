function eventWindowLoaded(){frameDesign(),downloadSVG(),setYPosition()}function frameDesign(){var e=document.getElementById("rabbet"),t=document.getElementById("frameside"),n=document.getElementById("spacer"),a=document.getElementById("svg-spacer"),l=document.getElementById("topMat"),o=document.getElementById("svg-top"),d=document.getElementById("bottomMat"),m=document.getElementById("svg-bottom"),i=document.getElementById("artwork"),u=document.getElementById("svg-artwork"),s=document.getElementById("backing"),r=document.getElementById("svg-board"),g=document.getElementById("additional"),c=document.getElementById("svg-additional"),y=document.getElementById("strainer"),v=document.getElementById("svg-strainer"),E=document.getElementById("svg-x"),p=document.getElementById("glazing"),I=document.getElementById("svg-glazing"),B=document.getElementById("frameCalc"),b=document.getElementById("remaining"),f=document.getElementById("measurement-remainder");B.addEventListener("change",(function(){var B=document.getElementsByClassName("values");Array.from(B,(function(e){0==e.value.length&&(e.value=0)}));var A=[e.value,p.value,n.value,l.value,d.value,s.value,y.value,g.value,i.value];A.forEach((function(e,t,n){if(-1!=e.indexOf("/")){var a,l=e.split(" ");l.length>1?a=l[1].split("/"):(a=l[0].split("/"),l[0]=0),n[t]=parseInt(l[0],10)+parseInt(a[0],10)/parseInt(a[1],10)}else n[t]=parseInt(e,10)}));var w=A.slice(1),L=A[0]-w.reduce((e,t)=>e+t,0),x=A.map((function(e){return 64*e})),k=x[0];t.setAttribute("height",k+10);var C=x[1],z=C-8;I.setAttribute("height",C),document.getElementById("notGlazing").setAttribute("transform","translate(0 "+z+")");var M=x[2],S=M-40;a.setAttribute("height",M),document.getElementById("notSpacer").setAttribute("transform","translate(0 "+S+")");var R=x[3],U=R-4;o.setAttribute("height",R),document.getElementById("notTop").setAttribute("transform","translate(0 "+U+")");var D=x[4],F=D-4;m.setAttribute("height",D),document.getElementById("notBottom").setAttribute("transform","translate(0 "+F+")");var G=x[8],O=G;u.setAttribute("height",G),document.getElementById("notArtwork").setAttribute("transform","translate(0 "+O+")");var P=x[5],Y=P-8;r.setAttribute("height",P),document.getElementById("notBacking").setAttribute("transform","translate(0 "+Y+")");var j=x[6],N=j-32+128.5;v.setAttribute("height",j),E.setAttribute("y2",N);var T,V,W=x[7];c.setAttribute("height",W),document.getElementById("strainer-group").setAttribute("transform","translate(0 "+W+")"),b.value=h(L)+'"',f.textContent=h(L)+'"',L<0?(V=Math.abs(L),T=h(V),b.value="-"+T+'"',f.textContent="-"+T+'"',b.classList.add("negative"),f.setAttribute("class","negative")):L>=0&&(T=h(L),b.value=T+'"',f.textContent=T+'"',b.classList.remove("negative"),f.setAttribute("class","positive"));setYPosition()})),e.addEventListener("input",(function(){document.getElementById("measurement-rabbet").textContent=e.value+'"'})),n.addEventListener("input",(function(){document.getElementById("measurement-spacer").textContent=n.value+'"',0==n.value.length||0==n.value||""==n.value?document.getElementById("spacer-group").style.display="none":document.getElementById("spacer-group").style.display="inline"})),l.addEventListener("change",(function(){document.getElementById("measurement-top").textContent=l.options[l.selectedIndex].value+'"',"1/16"==l.value?(document.getElementById("top-group").style.display="inline",document.getElementById("svg-top").setAttribute("points","103.5,61.3 40.7,61.3 40.7,65.3 109.2,65.3 ")):"1/8"==l.value?(document.getElementById("top-group").style.display="inline",document.getElementById("svg-top").setAttribute("points","103.5,61.3 40.7,61.3 40.7,69.3 109.2,69.3")):"0"==l.value&&(document.getElementById("top-group").style.display="none")}),!1),d.addEventListener("change",(function(){document.getElementById("measurement-bottom").textContent=d.options[d.selectedIndex].value+'"',"1/16"==d.value?(document.getElementById("svg-bottom").setAttribute("height","4"),document.getElementById("svg-bottom").style.display="inline",document.getElementById("measurement-bottom").style.display="inline"):"1/8"==d.value?(document.getElementById("svg-bottom").setAttribute("height","8"),document.getElementById("svg-bottom").style.display="inline",document.getElementById("measurement-bottom").style.display="inline"):"0"==d.value&&(document.getElementById("svg-bottom").style.display="none",document.getElementById("measurement-bottom").style.display="none")}),!1),i.addEventListener("input",(function(){document.getElementById("measurement-artwork").textContent=i.value+'"',0==i.value.length||"0"==i.value||""==i.value?document.getElementById("artwork-group").style.display="none":document.getElementById("artwork-group").style.display="inline"})),s.addEventListener("input",(function(){document.getElementById("measurement-backing").textContent=s.value+'"',0==s.value.length||"0"==s.value||""==s.value?(document.getElementById("svg-board").style.display="none",document.getElementById("measurement-backing").style.display="none"):(document.getElementById("svg-board").style.display="inline",document.getElementById("measurement-backing").style.display="inline")})),g.addEventListener("input",(function(){document.getElementById("measurement-additional").textContent=g.value+'"',0==g.value.length||0==g.value||""==g.value?document.getElementById("additional-group").style.display="none":document.getElementById("additional-group").style.display="inline"})),y.addEventListener("input",(function(){document.getElementById("measurement-strainer").textContent=y.value+'"',0==y.value.length||"0"==y.value||""==y.value?(document.getElementById("svg-strainer").style.display="none",document.getElementById("measurement-strainer").style.display="none"):(document.getElementById("svg-strainer").style.display="inline",document.getElementById("measurement-strainer").style.display="inline")})),p.addEventListener("input",(function(){document.getElementById("measurement-glazing").textContent=p.value+'"',"0"==p.value||0==p.length||""==p.value?(document.getElementById("svg-glazing").style.display="none",document.getElementById("measurement-glazing").style.display="none"):(document.getElementById("svg-glazing").style.display="inline",document.getElementById("measurement-glazing").style.display="inline")}));var h=function(e){if(parseFloat(e)===parseInt(e))return e;var t=function(e,n){return n<1e-7?e:t(n,Math.floor(e%n))},n=e.toString().length-2,a=Math.pow(10,n),l=e*a,o=t(l,a),d=0;return(l/=o)>(a/=o)&&(l-=(d=Math.floor(l/a))*a),e=Math.floor(l)+"/"+Math.floor(a),d&&(e=d+" "+e),e}}function downloadSVG(){var e=document.getElementById("download"),t=document.querySelector("svg");e.addEventListener("click",(function(){var e=document.getElementById("downloadable"),n=e.getContext("2d"),a=(new XMLSerializer).serializeToString(t),l=window.URL||window.webkitURL||window,o=new Image,d=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),m=l.createObjectURL(d);o.onload=function(){n.clearRect(0,0,1800,2e3),n.drawImage(o,0,0,1800,2e3),l.revokeObjectURL(m),function(e){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download","frame-diagram.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.dispatchEvent(t)}(e.toDataURL("image/png").replace("image/png","image/octet-stream"))},o.src=m}))}function setYPosition(){var e,t;Array.from(document.getElementsByClassName("label")).forEach(n=>{e=n.previousElementSibling,t=parseFloat(e.getAttribute("y"));var a=parseFloat(e.getAttribute("height"))/2+t+1;n.setAttribute("y",a)})}window.addEventListener("load",eventWindowLoaded,!1);