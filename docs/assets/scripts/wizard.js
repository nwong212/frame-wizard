function eventWindowLoaded(){Array.from(document.getElementsByTagName("rect")).forEach(e=>{var t=e.getAttribute("height");e.setAttribute("data-height",t)}),setFromHref(),calculator(),downloadSVG(),makeURL()}function setFromHref(){window.location.href.includes("?rabbet")&&new URL(window.location.href).searchParams.forEach((e,t)=>document.getElementById(t).value=decodeURIComponent(e)),calculator()}function makeURL(){var e,t=document.getElementById("url"),n=Array.from(document.getElementsByClassName("values")).map((function(e){return e.id+"="+encodeURIComponent(e.value)}));e=window.location.protocol+"//"+window.location.hostname+window.location.pathname+"?"+n.join("&"),t.value=e}function calculator(){var e=document.getElementById("remaining"),t=document.getElementById("measurement-remainder"),n=Array.from(document.getElementsByClassName("values"));let a=new Map;n.forEach(e=>{0!=e.value&&0!=e.value.length||(e.value=0),a.set(e.id,e.value)});let r=new Map;a.forEach((e,t)=>{var n=function(e){if(-1!=e.indexOf("/")){var t,n=e.split(" ");return n.length>1?t=n[1].split("/"):(t=n[0].split("/"),n[0]=0),parseInt(n[0],10)+parseInt(t[0],10)/parseInt(t[1],10)}return parseInt(e,10)}(e);r.set(t,n);var a="measurement-"+t;document.getElementById(a).textContent=e+'"'});var o,i=r.get("rabbet"),l=2*i-Array.from(r.values()).reduce((function(e,t){return e+t}),0);i>=2.375?(document.getElementById("frame-diagram").setAttribute("viewBox","-10 10 180 250"),document.getElementById("downloadable").setAttribute("height","2500")):(document.getElementById("frame-diagram").setAttribute("viewBox","-10 10 180 200"),document.getElementById("downloadable").setAttribute("height","2000")),l<0?(o=u(Math.abs(l)),e.value="-"+o+'"',t.textContent="-"+o+'"',e.classList.add("negative"),t.setAttribute("class","negative")):(o=u(l),e.value=o+'"',t.textContent=o+'"',e.classList.remove("negative"),t.setAttribute("class","positive"));var d=new Map;function u(e){if(parseFloat(e)===parseInt(e))return e;var t=function(e,n){return n<1e-7?e:t(n,Math.floor(e%n))},n=e.toString().length-2,a=Math.pow(10,n),r=e*a,o=t(r,a),i=0;return(r/=o)>(a/=o)&&(r-=(i=Math.floor(r/a))*a),e=Math.floor(r)+"/"+Math.floor(a),i&&(e=i+" "+e),e}r.forEach((e,t)=>{d.set(t,64*e)}),d.forEach((e,t)=>{var n="svg-"+t,a="not-"+t,r=t+"-group",o="measurement-"+t,i=document.getElementById(n),l=document.getElementById(a),d=document.getElementById(r),u=document.getElementById(o);if("rabbet"!=t){var c=e-parseFloat(i.dataset.height),m=e/2+parseFloat(i.getAttribute("y"))+1;i.setAttribute("height",e),l.setAttribute("transform","translate(0 "+c+")"),u.setAttribute("y",m),d.style.display=0==e?"none":"inline"}if("rabbet"==t){var s=32+e-128+128;i.setAttribute("points","38,"+s+" 26,"+s+" 26,22 51,22 51,32 38,32")}if("strainer"==t){var g=parseFloat(document.getElementById("svg-x").getAttribute("y1"))+e;document.getElementById("svg-x").setAttribute("y2",g)}})}function downloadSVG(){var e=document.getElementById("download"),t=document.querySelector("svg");e.addEventListener("click",(function(){var e=document.getElementById("downloadable"),n=e.getContext("2d"),a=(new XMLSerializer).serializeToString(t),r=window.URL||window.webkitURL||window,o=new Image,i=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),l=r.createObjectURL(i),d=e.height;o.onload=function(){n.clearRect(0,0,1800,d),n.rect(0,0,1800,d),n.fillStyle="white",n.fill(),n.drawImage(o,0,0,1800,d),r.revokeObjectURL(l),function(e){var t=new MouseEvent("click",{view:window,bubbles:!1,cancelable:!0}),n=document.createElement("a");n.setAttribute("download","frame-diagram.png"),n.setAttribute("href",e),n.setAttribute("target","_blank"),n.dispatchEvent(t)}(e.toDataURL("image/png").replace("image/png","image/octet-stream"))},o.src=l}),!1)}window.addEventListener("load",eventWindowLoaded,!1),window.addEventListener("change",calculator,!1),window.addEventListener("change",makeURL,!1);
//# sourceMappingURL=wizard.js.map